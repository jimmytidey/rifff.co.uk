package {	import fl.controls.TextInput;	import flash.events.*;	import flash.display.*;	import flash.text.TextField;	import fl.controls.Button;	import flash.media.SoundMixer;	import flash.media.SoundChannel;	public class Score extends MovieClip{		public var score:Array = new Array();				public function generate(jsonData, grid, soundContainer, number_of_steps, step_time) {								//declare the arrays 			for (var bank_index:int =0; bank_index < jsonData['banks'].length; bank_index++) {				score[bank_index] = new Array() 							for (var bank_option_index:int =0; bank_option_index < jsonData['banks'][bank_index]['bank_options'].length; bank_option_index++) {					score[bank_index][bank_option_index] = new Array();					for (var step_number:int =0; step_number < number_of_steps; step_number++) {						score[bank_index][bank_option_index][step_number] = new Array();						score[bank_index][bank_option_index][step_number]['action'] = '';						score[bank_index][bank_option_index][step_number]['offset'] = '0';							if (grid[bank_index][step_number][bank_option_index] == 100) { 							grid[bank_index][step_number]['certain_play'] = bank_option_index;							trace("bank index" + bank_index + " bank option index " + bank_option_index + " step number" + step_number); 						}					}				}			}						//now set the arrays 			for (bank_index=0; bank_index < jsonData['banks'].length; bank_index++) {				for (step_number=0; step_number < number_of_steps; step_number++) {														//if there is one step that is going to play, play it and stop everything else 					if(grid[bank_index][step_number]['certain_play'] != undefined) {						for (bank_option_stop_index=0; bank_option_stop_index < jsonData['banks'][bank_index]['bank_options'].length; bank_option_stop_index++) {							score[bank_index][bank_option_stop_index][step_number]['action'] = "stop";						}												var certain_number = grid[bank_index][step_number]['certain_play'];						if (jsonData['banks'][bank_index]['bank_options'][certain_number]['loop'] == "true") {							score[bank_index][certain_number][step_number]['action'] = "loop";						}						else { 							score[bank_index][certain_number][step_number]['action'] = "play";						}					}										//work out what we need to stop 					else { 						for (bank_option_index=0; bank_option_index < jsonData['banks'][bank_index]['bank_options'].length; bank_option_index++) {							if (jsonData['banks'][bank_index]['bank_options'][certain_number]['overplay'] != 'true') {								score[bank_index][bank_option_index][step_number]['action'] = "stop";							}						}					}				}			}		}	}}